# Ice Dns Tunnel Backdoor (DNS 隧道 渗透&后门)
本作品使用了DNS隧道技术，且是跨平台的（go语言），目前编译成了 windows 64位 和 linux64位的两个版本。功能和操作相同

本作品是我花费了2天半的时间写的，遵循了标准的DNS MX协议，在极端网络屏蔽情况下，内网渗透变得复杂，我们只能把通信包装成dns协议才能继续内网渗透。本作品利用了超长域名分段传输数据

**优势：**
1】使用了aes对称加密算法，传输过程即使人工手动检测到DNS异常传输也难以解码。
2】传输协议稳定，客户端&服务端严格遵循DNS MX协议，且传输过程分段打包传输
3】使用了http扩展协议，可以通过http post的方式优雅关停服务。避免手动hook隐藏以后 找不到进程无法结束（例如linux上使用 curl 即可优雅关停，下文有使用说明）
4】跨平台，多平台


**劣势：**
1】没有做相关的rookit hook 进程可见。在此推荐1个linux效果不错 兼容性很强的hook。可以自己手动hook。已经测试了可用。
另一方面考虑是系统兼容性问题所以没有整合到代码中，还是自己make自己手动hook稳定性比较好。
https://github.com/gianlucaborello/libprocesshider （使用了  ld preloader 技术）

2】体积略大，因为是使用golang写的，在没压缩的情况下已经比较大了，可以自行加壳压缩。目前渗透工作，文件体积大小不是瓶颈
3】只使用了dns隧道，其他隧道没有做，因为目前做工具只想做专精，不想整合太多隧道，恶意行为太多容易被一些极端防火墙告警。
后续其他隧道预计独立项目开发。尽量不做整合
4】传输略慢，因为dns隧道对数据包的大小有严格要求，所以只能分段传输，最后还要合包。效率不及普通TCP。
命令回显需要等待一些时间。命令发送禁止超长命令。

**使用场景：**
内网极端环境下的渗透（防火墙只允许dns协议），以及拿到root权限后，配合hook隐藏技术，下后门。

**用途：**
可以使用此工具 远程执行shell命令


## 目录结构
client 目录 -> 目录里的_test文件是一些很重要的测试 
server_main.go.b  ->  是服务端的main文件
client.main.go  ->  是客户端的main文件
generator 目录 -> 是使用易语言写的生成器，只是生成方便一些，给菜鸟使用。大牛可以自行改代码编译
generator.exe -> 是易语言编译好的生成器


## 使用说明


## 写给使用者
【免责声明：无恶意代码，仅作隧道技术研究，用于非法用途自负】

写的比较仓促，基础测试已经做过，基本命令可以执行，在windows环境上测试成功，linux还没来得及测试。有BUG可以提出。另外重申，不考虑整合入太多功能，而尽量是分散开。


## 写给若干NB的大佬&组织：
在这个领域默默研究 7 8 年了，有些作品没有发布，给朋友内部用了。现在发布一个简陋的作品，有哪个组织看的上我，可以吸纳一下，希望能一起讨论技术，一起研究这个安全领域。谢谢

我的联系方式：
